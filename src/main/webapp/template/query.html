<span>
					
	<accordion-heading>
		Query {{ queryIndex + 1 }} <span ng-show="query.obj">- {{ query.obj }}</span>
	</accordion-heading>

	<div class="form-horizontal">
		
		<div class="form-group" ng-class="{'has-error': server.showErrorMessage('servers[0].queries[' + queryIndex + '].obj')}">
			<label class="col-sm-2 control-label">Object</label>
			<div class="col-sm-10">
				<input type="text" class="form-control" ng-model="query.obj" ng-change="server.saved = false; suggestName();" typeahead="name for name in nameSuggestions | filter:$viewValue | limitTo:10">
				<p class="text-danger" ng-show="server.showErrorMessage('servers[0].queries[' + queryIndex + '].obj')">The submitted value is incorrect.</p>
			</div>
		</div>

		<div class="form-group">
			<label class="col-sm-2 control-label">Result alias</label>
			<div class="col-sm-10">
				<input type="text" class="form-control" ng-model="query.resultAlias" ng-change="server.saved = false">
			</div>
		</div>

		<hr>

		<div ng-repeat="(i, typeName) in query.typeNames track by $index" class="form-group">
			<label class="col-sm-2 control-label">Type name {{ $index + 1 }}</label>
			<div class="col-sm-8">
				<input type="text" class="form-control" ng-model="query.typeNames[i]" ng-change="server.saved = false">
			</div>
			<div class="col-sm-2">
				<button type="button" class="btn btn-danger" ng-click="removeTypeName($index)"><span class="glyphicon glyphicon-remove"></span> Remove</button>
			</div>
		</div>

		<div ng-show="server.blankTypeNames[queryIndex]" class="form-group">
			<label class="col-sm-2 control-label">Type name {{ query.typeNames.length + 1 }}</label>
			<div class="col-sm-8">
				<input type="text" class="form-control" ng-model="server.blankTypeNames[queryIndex].value" ng-change="server.saved = false">
			</div>
			<div class="col-sm-2">
				<button type="button" class="btn btn-danger" ng-click="removeBlankTypeName()"><span class="glyphicon glyphicon-remove"></span> Remove</button>
			</div>
		</div>

		<button type="button" class="btn btn-lg btn-block btn-default" ng-click="addBlankTypeName()">Add a type name</button>

		<hr>

		<div ng-repeat="(i, attr) in query.attr track by $index" class="form-group">
			<label class="col-sm-2 control-label">Attribute {{ $index + 1 }}</label>
			<div class="col-sm-8">
				<input type="text" class="form-control" ng-model="query.attr[i]" ng-change="server.saved = false; suggestAttr();" typeahead="attr for attr in attrSuggestions | filter:$viewValue | limitTo:10">
			</div>
			<div class="col-sm-2">
				<button type="button" class="btn btn-danger" ng-click="removeAttr($index)"><span class="glyphicon glyphicon-remove"></span> Remove</button>
			</div>
		</div>

		<div ng-show="server.blankAttr[queryIndex]" class="form-group">
			<label class="col-sm-2 control-label">Attribute {{ query.attr.length + 1 }}</label>
			<div class="col-sm-8">
				<input type="text" class="form-control" ng-model="server.blankAttr[queryIndex].value" ng-change="server.saved = false; suggestAttr();" typeahead="attr for attr in attrSuggestions | filter:$viewValue | limitTo:10">
			</div>
			<div class="col-sm-2">
				<button type="button" class="btn btn-danger" ng-click="removeBlankAttr()"><span class="glyphicon glyphicon-remove"></span> Remove</button>
			</div>
		</div>

		<p class="text-danger" ng-show="showErrorMessage(queryIndex, 'attr')">At least one attribute must be supplied.</p>

		<button type="button" class="btn btn-lg btn-block btn-default" ng-click="server.addBlankAttr()">Add an attribute</button>

		<hr>

		<button type="button" class="btn btn-lg btn-block btn-danger" ng-click="server.removeQuery()">Remove query</button>

	</div>
	
</span>